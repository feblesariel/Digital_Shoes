<!doctype html>
<html lang="en">

<%-include("./partials/head.ejs")%>

    <body>

        <div class="container">

            <%-include("./partials/header.ejs")%>

                <main class="bg-white pb-5">


                    <img src="/images/banner-form.jpg" class="img-fluid" alt="...">

                    <%let suma=0; let parcial=0;%>

                        <section class="h-100 h-custom">
                            <div class="container py-5 h-100">
                                <div class="row d-flex justify-content-center align-items-center h-100">
                                    <div class="col">
                                        <div class="card">
                                            <div class="card-body p-4 shadow-lg">

                                                <div class="row">

                                                    <div class="col lg-7">

                                                        <% if (locals.items) { items.forEach (item=> { %>
                                                            <% parcial=item.precio; suma +=parcial %>

                                                                <div class="col-lg-12 mb-3">
                                                                    <div class="card shadow">
                                                                        <div class="card-body">
                                                                            <div class="d-flex justify-content-between">
                                                                                <div
                                                                                    class="d-flex flex-row align-items-center">
                                                                                    <div>
                                                                                        <img src="/images/products/<%=item.producto.imagen%>"
                                                                                            class="img-fluid rounded-3"
                                                                                            alt="Shopping item"
                                                                                            style="width: 65px;">
                                                                                    </div>
                                                                                    <div class="ms-3">
                                                                                        <h5 class="m-0">
                                                                                            <%=item.producto.nombre %>
                                                                                        </h5>
                                                                                    </div>
                                                                                </div>
                                                                                <div
                                                                                    class="d-flex flex-row align-items-center">
                                                                                    <div style="width: 50px;">
                                                                                        <h5 class="fw-normal mb-0">
                                                                                            <%= item.cantidad %>
                                                                                        </h5>
                                                                                    </div>
                                                                                    <div style="width: 80px;">
                                                                                        <h5 class="mb-0">$<%=
                                                                                                item.precio %>
                                                                                        </h5>
                                                                                    </div>
                                                                                    <form
                                                                                    action="/products/carrito/delete/<%=item.id%>?_method=delete"
                                                                                    method="post" style="display:contents">
                                                                                    <button type="submit"
                                                                                        class="btn btn-outline-secondary w-30">X</button>
                                                                                </form>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>

                                                                <% })} if (items[0] == undefined) { %> <div class="col-lg-12"><p class="h3 text-center p-3">Carrito vacio</p></div><div class="col-lg-12 text-center pb-3"><a href="/products/">
                                                                    <button type="submit" class="btn btn-outline-secondary">PRODUCTOS</button>
                                                                  </a></div> <% } %>

                                                                  <% if (items.length >= 1) { %><div class="col-lg-12 py-3"><a href="/products/">
                                                                    <button type="submit" class="btn btn-outline-secondary">SEGUIR COMPRANDO</button>
                                                                  </a></div> <% }%>
                                                    </div>

                                                    <div class="col-lg-5">

                                                        <div class="col-lg-12">

                                                            <div class="card bg-secondary text-white rounded-3">
                                                                <div class="card-body">
                                                                    <div
                                                                        class="d-flex justify-content-between align-items-center mb-4">
                                                                        <h5 class="mb-0">Detalles de tarjeta</h5>
                                                                        <img src="/images/users/<%=old.imagen%>"
                                                                            class="img-fluid rounded-3"
                                                                            style="width: 45px;" alt="Avatar">
                                                                    </div>

                                                                    <a href="#!" type="submit" class="text-white"><i
                                                                            class="fab fa-cc-mastercard fa-2x me-2"></i></a>
                                                                    <a href="#!" type="submit" class="text-white"><i
                                                                            class="fab fa-cc-visa fa-2x me-2"></i></a>
                                                                    <a href="#!" type="submit" class="text-white"><i
                                                                            class="fab fa-cc-amex fa-2x me-2"></i></a>
                                                                    <a href="#!" type="submit" class="text-white"><i
                                                                            class="fab fa-cc-paypal fa-2x"></i></a>

                                                                    <form class="mt-4">
                                                                        <div class="form-outline form-white mb-4">
                                                                            <input type="text" id="typeName"
                                                                                class="form-control form-control-lg"
                                                                                siez="17" placeholder="JUAN PEREZ" />
                                                                            <label class="form-label"
                                                                                for="typeName">Nombre del
                                                                                titular</label>
                                                                        </div>

                                                                        <div class="form-outline form-white mb-4">
                                                                            <input type="text" id="typeText"
                                                                                class="form-control form-control-lg"
                                                                                siez="17"
                                                                                placeholder="1234 5678 9012 3457"
                                                                                minlength="19" maxlength="19" />
                                                                            <label class="form-label"
                                                                                for="typeText">Numero de
                                                                                tarjeta</label>
                                                                        </div>

                                                                        <div class="row mb-4">
                                                                            <div class="col-md-6">
                                                                                <div class="form-outline form-white">
                                                                                    <input type="text" id="typeExp"
                                                                                        class="form-control form-control-lg"
                                                                                        placeholder="MM/YYYY" size="7"
                                                                                        id="exp" minlength="7"
                                                                                        maxlength="7" />
                                                                                    <label class="form-label"
                                                                                        for="typeExp">Expiracion</label>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-6">
                                                                                <div class="form-outline form-white">
                                                                                    <input type="password" id="typeText"
                                                                                        class="form-control form-control-lg"
                                                                                        placeholder="&#9679;&#9679;&#9679;"
                                                                                        size="1" minlength="3"
                                                                                        maxlength="3" />
                                                                                    <label class="form-label"
                                                                                        for="typeText">CVV</label>
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </form>

                                                                    <hr class="my-4">

                                                                    <div class="d-flex justify-content-between">
                                                                        <p class="mb-2">Subtotal</p>
                                                                        <p class="mb-2">$<%=parcial%>
                                                                        </p>
                                                                    </div>

                                                                    <div class="d-flex justify-content-between mb-4">
                                                                        <p class="mb-2">Total(Incl. imp)</p>
                                                                        <p class="mb-2">$<%=suma%>
                                                                        </p>
                                                                    </div>

                                                                    <button type="button"
                                                                        class="btn btn-light btn-block btn-lg">
                                                                        <div class="d-flex justify-content-between">
                                                                            <span>Confirmar <i
                                                                                    class="fas fa-long-arrow-alt-right ms-2"></i></span>
                                                                        </div>
                                                                    </button>

                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>


                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                </main>

                <%-include("./partials/footer.ejs")%>

        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
            crossorigin="anonymous"></script>
    </body>

</html>